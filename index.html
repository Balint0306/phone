<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Telefon</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #6366f1;
        --primary-light: #8183f4;
        --danger: #ef4444;
        --danger-light: #f87171;
        --success: #10b981;
        --success-light: #34d399;
        --warning: #f59e0b;
        --warning-light: #fbbf24;
        --dark: #0f172a;
        --light: #f8fafc;
        --gray: #94a3b8;
        --spotify: #1db954;
        --shopping: #4facfe;
        --recipes: #f5576c;
        --streaming: #8b5cf6;
        --glass: rgba(255, 255, 255, 0.2);
        --glass-border: rgba(255, 255, 255, 0.3);
        --current-wallpaper: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><linearGradient id="gradient" gradientTransform="rotate(160)"><stop offset="0%" stop-color="%23f5f7fa"/><stop offset="100%" stop-color="%23c3cfe2"/></linearGradient><rect width="100%" height="100%" fill="url(%23gradient)"/></svg>');
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont,
          sans-serif;
        background: linear-gradient(135deg, #0f172a, #1e293b);
        min-height: 50vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--light);
        overflow: hidden;
        touch-action: manipulation;
        padding: 20px;
      }

      /* Telefon keret */
      .phone {
        width: 100%;
        max-width: 375px;
        height: 80vh;
        min-height: 600px;
        background: #000;
        border-radius: 50px;
        position: relative;
        box-shadow: 0 0 0 12px #1a1a1a, 0 0 0 14px #3d3d3d,
          0 30px 80px rgba(0, 0, 0, 0.8);
        overflow: hidden;
        border: 1px solid #333;
        transform-style: preserve-3d;
        perspective: 1000px;
      }

      /* Kijelző */
      .screen {
        width: 100%;
        height: 100%;
        background: var(--current-wallpaper);
        background-size: cover;
        background-position: center;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
        transition: background 0.5s ease;
      }

      /* Lock screen */
      .lock-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, #000000, #1a1a1a);
        z-index: 100;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        padding: 60px 20px 40px;
        transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
      }

      .lock-screen.unlocked {
        transform: translateY(-100%);
      }

      .lock-time {
        font-size: 72px;
        font-weight: 200;
        color: white;
        margin-top: 40px;
        text-align: center;
      }

      .lock-date {
        font-size: 20px;
        font-weight: 400;
        color: rgba(255, 255, 255, 0.8);
        margin-top: 10px;
        text-align: center;
      }

      .unlock-instruction {
        font-size: 16px;
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 30px;
        text-align: center;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 0.7;
        }
        50% {
          opacity: 1;
        }
      }

      .fingerprint-sensor {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 60px;
        position: relative;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .fingerprint-sensor:active {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(0.95);
      }

      .fingerprint-icon {
        font-size: 40px;
        color: rgba(255, 255, 255, 0.7);
      }

      .fingerprint-animation {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 2px solid transparent;
        animation: ripple 1.5s infinite;
        pointer-events: none;
      }

      @keyframes ripple {
        0% {
          width: 0;
          height: 0;
          border-color: rgba(255, 255, 255, 0.3);
          opacity: 1;
        }
        100% {
          width: 150%;
          height: 150%;
          border-color: rgba(255, 255, 255, 0);
          opacity: 0;
        }
      }

      /* Dynamic Island */
      .dynamic-island {
        width: 120px;
        height: 35px;
        background: #000;
        border-radius: 20px;
        margin: 15px auto 0;
        position: relative;
        z-index: 10;
        display: flex;
        justify-content: center;
        align-items: center;
        transform: translateZ(10px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        animation: float 6s ease-in-out infinite;
      }

      .island-camera {
        width: 12px;
        height: 12px;
        background: #0d0d0d;
        border: 2px solid #1a1a1a;
        border-radius: 50%;
        margin-right: 8px;
      }

      .island-sensor {
        width: 8px;
        height: 8px;
        background: #0d0d0d;
        border: 2px solid #1a1a1a;
        border-radius: 50%;
      }

      /* Status bar */
      .status-bar {
        display: flex;
        justify-content: space-between;
        padding: 12px 20px 5px;
        font-size: 14px;
        font-weight: 600;
        color: #000;
        position: relative;
        z-index: 5;
      }

      .time {
        font-weight: 700;
        letter-spacing: 0.5px;
      }

      .status-icons {
        display: flex;
        gap: 5px;
      }

      /* Wallpaper */
      .wallpaper {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.1) 0%,
          rgba(139, 92, 246, 0.1) 100%
        );
        z-index: 1;
      }

      /* App grid */
      .app-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        padding: 25px;
        margin-top: 10px;
        flex-grow: 1;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        position: relative;
        z-index: 2;
      }

      .app-grid::-webkit-scrollbar {
        display: none;
      }

      /* App ikon */
      .app-icon {
        display: flex;
        flex-direction: column;
        align-items: center;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        text-decoration: none;
        position: relative;
        perspective: 1000px;
        transform-style: preserve-3d;
        animation: appIconEntrance 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        opacity: 0;
      }

      @keyframes appIconEntrance {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.9) rotateX(45deg);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1) rotateX(0);
        }
      }

      .app-icon:active .icon {
        transform: scale(0.85) translateZ(0);
        filter: brightness(0.9);
      }

      .app-icon:hover .icon {
        transform: translateY(-8px) scale(1.05) translateZ(20px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .icon {
        width: 60px;
        height: 60px;
        border-radius: 18px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 8px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        overflow: hidden;
        transform: translateZ(10px);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .icon::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.3) 0%,
          rgba(255, 255, 255, 0) 60%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .app-icon:hover .icon::after {
        opacity: 1;
      }

      .icon i {
        font-size: 28px;
        color: white;
        position: relative;
        z-index: 1;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .app-name {
        font-size: 12px;
        color: #000;
        text-align: center;
        font-weight: 500;
        transition: all 0.3s ease;
        text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
      }

      .app-icon:hover .app-name {
        transform: translateY(2px);
        color: #333;
      }

      /* App ikon színek */
      .shopping-icon {
        background: linear-gradient(135deg, var(--shopping) 0%, #00f2fe 100%);
      }

      .recipe-icon {
        background: linear-gradient(135deg, #f093fb 0%, var(--recipes) 100%);
      }

      .spotify-icon {
        background: linear-gradient(135deg, var(--spotify) 0%, #1ed760 100%);
      }

      .settings-icon {
        background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
      }

      .streaming-icon {
        background: linear-gradient(135deg, var(--streaming) 0%, #a78bfa 100%);
      }

      /* Dock */
      .dock {
        padding: 15px 25px 25px;
        background: var(--glass);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-top: 1px solid var(--glass-border);
        display: flex;
        justify-content: space-around;
        border-bottom-left-radius: 50px;
        border-bottom-right-radius: 50px;
        margin: 0 15px 15px;
        position: relative;
        z-index: 3;
      }

      .dock-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.3s ease;
        transform: translateZ(10px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .dock-icon:hover {
        transform: translateY(-5px) translateZ(15px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
      }

      .dock-icon:active {
        transform: translateY(0) scale(0.95);
      }

      .dock-icon i {
        font-size: 24px;
        color: white;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      /* App content */
      .app-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--light);
        z-index: 20;
        transform: translateY(100%);
        transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        border-radius: 40px;
        overflow: hidden;
        display: none;
        flex-direction: column;
        box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.2);
        touch-action: pan-y;
      }

      .app-content.active {
        transform: translateY(0);
        display: flex;
      }

      .app-content.swiping {
        transition: none;
      }

      .app-content.closing {
        transition: transform 0.5s cubic-bezier(0.45, 0, 0.55, 1);
      }

      .app-body {
        flex-grow: 1;
        overflow: hidden;
        position: relative;
      }

      .webview-container {
        width: 100%;
        height: 100%;
        overflow: hidden;
        position: relative;
      }

      .webview {
        width: 100%;
        height: 100%;
        border: none;
        overflow: hidden;
        display: block;
      }

      /* Swipe indicator */
      .swipe-indicator {
        position: absolute;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 40px;
        height: 5px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 3px;
        z-index: 21;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .app-content.active .swipe-indicator {
        opacity: 1;
        animation: swipePulse 2s infinite;
      }

      @keyframes swipePulse {
        0%,
        100% {
          opacity: 0.5;
          transform: translateX(-50%) scale(1);
        }
        50% {
          opacity: 0.2;
          transform: translateX(-50%) scale(0.9);
        }
      }

      /* Beállítások oldal */
      .settings-page {
        padding: 20px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      .settings-section {
        margin-bottom: 25px;
      }

      .settings-title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
      }

      .settings-title i {
        margin-right: 10px;
        color: var(--primary);
      }

      .url-input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        align-items: center;
      }

      .url-input {
        flex-grow: 1;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 10px;
        font-size: 14px;
        transition: border 0.2s ease;
      }

      .url-input:focus {
        border-color: var(--primary);
        outline: none;
      }

      .save-btn {
        padding: 12px 20px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 10px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .save-btn:hover {
        background: var(--primary-light);
      }

      .save-btn:active {
        transform: scale(0.95);
      }

      .wallpaper-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-top: 10px;
      }

      .wallpaper-option {
        height: 80px;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 2px solid transparent;
        overflow: hidden;
        position: relative;
      }

      .wallpaper-option:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }

      .wallpaper-option.active {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
      }

      .wallpaper-preview {
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
      }

      /* Értesítés */
      .toast {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 12px 25px;
        border-radius: 30px;
        z-index: 100;
        opacity: 0;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        max-width: 80%;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      /* Home indicator */
      .home-indicator {
        width: 120px;
        height: 5px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 3px;
        margin: 0 auto 10px;
        position: relative;
        z-index: 4;
      }

      /* Animációk */
      @keyframes float {
        0%,
        100% {
          transform: translateY(0) translateZ(10px);
        }
        50% {
          transform: translateY(-10px) translateZ(20px);
        }
      }

      /* App ikonok animációjának késleltetése */
      .app-icon:nth-child(1) {
        animation-delay: 0.1s;
      }
      .app-icon:nth-child(2) {
        animation-delay: 0.2s;
      }
      .app-icon:nth-child(3) {
        animation-delay: 0.3s;
      }
      .app-icon:nth-child(4) {
        animation-delay: 0.4s;
      }
      .app-icon:nth-child(5) {
        animation-delay: 0.5s;
      }

      /* Responsive adjustments */
      @media (max-height: 700px) {
        .phone {
          height: 85vh;
          min-height: 500px;
          border-radius: 40px;
        }

        .app-grid {
          gap: 15px;
          padding: 15px;
        }

        .icon {
          width: 50px;
          height: 50px;
          border-radius: 15px;
        }

        .icon i {
          font-size: 24px;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        .screen {
          background: #000;
        }

        .status-bar,
        .app-name {
          color: #fff;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .dock {
          background: rgba(0, 0, 0, 0.4);
          border-top: 1px solid rgba(0, 0, 0, 0.2);
        }

        .wallpaper {
          background: linear-gradient(
            135deg,
            rgba(99, 102, 241, 0.2) 0%,
            rgba(139, 92, 246, 0.2) 100%
          );
        }
      }
    </style>
  </head>
  <body>
    <!-- Telefon keret -->
    <div class="phone">
      <!-- Lock screen -->
      <div class="lock-screen" id="lock-screen">
        <div></div>
        <!-- Empty div for spacing -->

        <div class="lock-time-container">
          <div class="lock-time" id="lock-time">14:25</div>
          <div class="lock-date" id="lock-date">Hétfő, 2023. május 1.</div>
        </div>

        <div class="unlock-instruction">Érintse meg az ujjlenyomat-olvasót</div>

        <div class="fingerprint-sensor" id="fingerprint-sensor">
          <i class="fas fa-fingerprint fingerprint-icon"></i>
          <div class="fingerprint-animation"></div>
        </div>
      </div>

      <!-- Dynamic Island -->
      <div class="dynamic-island">
        <div class="island-camera"></div>
        <div class="island-sensor"></div>
      </div>

      <!-- Kijelző -->
      <div class="screen">
        <!-- Háttérkép -->
        <div class="wallpaper"></div>

        <!-- Status bar -->
        <div class="status-bar">
          <span class="time" id="current-time">14:25</span>
          <div class="status-icons">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-three-quarters"></i>
          </div>
        </div>

        <!-- App ikonok -->
        <div class="app-grid" id="app-grid">
          <!-- Bevásárlólista -->
          <div class="app-icon" data-app="shopping">
            <div class="icon shopping-icon">
              <i class="fas fa-shopping-basket"></i>
            </div>
            <span class="app-name">Bevásárló</span>
          </div>

          <!-- Receptek -->
          <div class="app-icon" data-app="recipes">
            <div class="icon recipe-icon">
              <i class="fas fa-utensils"></i>
            </div>
            <span class="app-name">Receptek</span>
          </div>

          <!-- Spotify -->
          <div class="app-icon" data-app="spotify">
            <div class="icon spotify-icon">
              <i class="fab fa-spotify"></i>
            </div>
            <span class="app-name">Spotify</span>
          </div>

          <!-- Streaming -->
          <div class="app-icon" data-app="streaming">
            <div class="icon streaming-icon">
              <i class="fas fa-play-circle"></i>
            </div>
            <span class="app-name">Streaming</span>
          </div>

          <!-- Beállítások -->
          <div class="app-icon" data-app="settings">
            <div class="icon settings-icon">
              <i class="fas fa-cog"></i>
            </div>
            <span class="app-name">Beállítások</span>
          </div>
        </div>

        <!-- Dock -->
        <div class="dock">
          <div class="dock-icon shopping-icon">
            <i class="fas fa-shopping-basket"></i>
          </div>
          <div class="dock-icon recipe-icon">
            <i class="fas fa-utensils"></i>
          </div>
          <div class="dock-icon spotify-icon">
            <i class="fab fa-spotify"></i>
          </div>
          <div class="dock-icon settings-icon">
            <i class="fas fa-cog"></i>
          </div>
        </div>

        <!-- Home indicator -->
        <div class="home-indicator"></div>
      </div>

      <!-- App tartalmak -->
      <div class="app-content" id="shopping-content">
        <div class="swipe-indicator"></div>
        <div class="app-body">
          <div class="webview-container">
            <iframe
              class="webview"
              id="shopping-webview"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>

      <div class="app-content" id="recipes-content">
        <div class="swipe-indicator"></div>
        <div class="app-body">
          <div class="webview-container">
            <iframe
              class="webview"
              id="recipes-webview"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>

      <div class="app-content" id="spotify-content">
        <div class="swipe-indicator"></div>
        <div class="app-body">
          <div class="webview-container">
            <iframe
              class="webview"
              id="spotify-webview"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>

      <div class="app-content" id="streaming-content">
        <div class="swipe-indicator"></div>
        <div class="app-body">
          <div class="webview-container">
            <iframe
              class="webview"
              id="streaming-webview"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>

      <div class="app-content" id="settings-content">
        <div class="swipe-indicator"></div>
        <div class="app-body">
          <div class="settings-page">
            <div class="settings-section">
              <div class="settings-title">
                <i class="fas fa-link"></i>
                <span>URL Beállítások</span>
              </div>

              <div class="url-input-group">
                <input
                  type="text"
                  id="shopping-url-input"
                  class="url-input"
                  placeholder="https://example.com/shopping"
                />
                <button class="save-btn" onclick="saveUrl('shopping')">
                  Mentés
                </button>
              </div>

              <div class="url-input-group">
                <input
                  type="text"
                  id="recipes-url-input"
                  class="url-input"
                  placeholder="https://example.com/recipes"
                />
                <button class="save-btn" onclick="saveUrl('recipes')">
                  Mentés
                </button>
              </div>

              <div class="url-input-group">
                <input
                  type="text"
                  id="spotify-url-input"
                  class="url-input"
                  placeholder="https://open.spotify.com/"
                />
                <button class="save-btn" onclick="saveUrl('spotify')">
                  Mentés
                </button>
              </div>

              <div class="url-input-group">
                <input
                  type="text"
                  id="streaming-url-input"
                  class="url-input"
                  placeholder="https://example.com/streaming"
                />
                <button class="save-btn" onclick="saveUrl('streaming')">
                  Mentés
                </button>
              </div>
            </div>

            <div class="settings-section">
              <div class="settings-title">
                <i class="fas fa-image"></i>
                <span>Háttérkép</span>
              </div>

              <div class="wallpaper-options">
                <div
                  class="wallpaper-option active"
                  data-wallpaper="gradient1"
                  onclick="changeWallpaper('gradient1')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        160deg,
                        #f5f7fa 0%,
                        #c3cfe2 100%
                      );
                    "
                  ></div>
                </div>
                <div
                  class="wallpaper-option"
                  data-wallpaper="gradient2"
                  onclick="changeWallpaper('gradient2')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        135deg,
                        #6d28d9 0%,
                        #8b5cf6 100%
                      );
                    "
                  ></div>
                </div>
                <div
                  class="wallpaper-option"
                  data-wallpaper="gradient3"
                  onclick="changeWallpaper('gradient3')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        135deg,
                        #3b82f6 0%,
                        #1dd4af 100%
                      );
                    "
                  ></div>
                </div>
                <div
                  class="wallpaper-option"
                  data-wallpaper="gradient4"
                  onclick="changeWallpaper('gradient4')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        135deg,
                        #f97316 0%,
                        #f59e0b 100%
                      );
                    "
                  ></div>
                </div>
                <div
                  class="wallpaper-option"
                  data-wallpaper="gradient5"
                  onclick="changeWallpaper('gradient5')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        135deg,
                        #ec4899 0%,
                        #f472b6 100%
                      );
                    "
                  ></div>
                </div>
                <div
                  class="wallpaper-option"
                  data-wallpaper="gradient6"
                  onclick="changeWallpaper('gradient6')"
                >
                  <div
                    class="wallpaper-preview"
                    style="
                      background: linear-gradient(
                        135deg,
                        #1db954 0%,
                        #34d399 100%
                      );
                    "
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Értesítés -->
    <div class="toast" id="toast"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Lock screen elements
        const lockScreen = document.getElementById("lock-screen");
        const lockTime = document.getElementById("lock-time");
        const lockDate = document.getElementById("lock-date");
        const fingerprintSensor = document.getElementById("fingerprint-sensor");

        // Valós idő frissítése
        function updateTime() {
          const now = new Date();
          const hours = now.getHours().toString().padStart(2, "0");
          const minutes = now.getMinutes().toString().padStart(2, "0");
          const timeString = `${hours}:${minutes}`;

          // Update time everywhere
          document.getElementById("current-time").textContent = timeString;
          lockTime.textContent = timeString;

          // Update date
          const days = [
            "Vasárnap",
            "Hétfő",
            "Kedd",
            "Szerda",
            "Csütörtök",
            "Péntek",
            "Szombat",
          ];
          const months = [
            "január",
            "február",
            "március",
            "április",
            "május",
            "június",
            "július",
            "augusztus",
            "szeptember",
            "október",
            "november",
            "december",
          ];
          const dayName = days[now.getDay()];
          const monthName = months[now.getMonth()];
          const dateString = `${dayName}, ${now.getFullYear()}. ${monthName} ${now.getDate()}.`;
          lockDate.textContent = dateString;
        }

        updateTime();
        setInterval(updateTime, 1000); // Másodpercenként frissít

        // Fingerprint authentication
        let isAuthenticating = false;

        fingerprintSensor.addEventListener("click", function () {
          if (isAuthenticating) return;

          isAuthenticating = true;
          this.querySelector(".fingerprint-icon").style.color =
            "var(--primary)";

          // Simulate fingerprint scan
          setTimeout(() => {
            // 80% chance of success (for demo purposes)
            const isSuccess = Math.random() < 0.8;

            if (isSuccess) {
              // Success - unlock phone
              this.querySelector(".fingerprint-icon").style.color =
                "var(--success)";
              showToast("🔓 Sikeres azonosítás");

              setTimeout(() => {
                lockScreen.classList.add("unlocked");
                isAuthenticating = false;
              }, 500);
            } else {
              // Failure
              this.querySelector(".fingerprint-icon").style.color =
                "var(--danger)";
              showToast("❌ Azonosítás sikertelen");

              setTimeout(() => {
                this.querySelector(".fingerprint-icon").style.color =
                  "rgba(255, 255, 255, 0.7)";
                isAuthenticating = false;
              }, 1000);
            }
          }, 1500);
        });

        // App URL-ek definiálása
        const appUrls = {
          shopping: "https://5nsgxn.csb.app",
          recipes: "https://6qx72n.csb.app",
          spotify: "https://hfqpzt.csb.app",
          streaming: "https://8qxpr3.csb.app",
        };

        // URL beviteli mezők feltöltése
        document.getElementById("shopping-url-input").value = appUrls.shopping;
        document.getElementById("recipes-url-input").value = appUrls.recipes;
        document.getElementById("spotify-url-input").value = appUrls.spotify;
        document.getElementById("streaming-url-input").value =
          appUrls.streaming;

        // App ikonok animációja
        const appIcons = document.querySelectorAll(".app-icon");
        appIcons.forEach((icon, index) => {
          icon.style.animationDelay = `${index * 0.1}s`;
          icon.style.opacity = "1";

          // Kattintás esemény
          icon.addEventListener("click", function () {
            const appName = this.getAttribute("data-app");
            openApp(appName);
          });
        });

        // Dock ikonok eseményei
        const dockIcons = document.querySelectorAll(".dock-icon");
        dockIcons.forEach((icon, index) => {
          icon.addEventListener("click", function () {
            const apps = ["shopping", "recipes", "spotify", "settings"];
            if (index < apps.length) {
              openApp(apps[index]);
            }
          });
        });

        // App megnyitása
        function openApp(appName) {
          // Check if phone is locked
          if (!lockScreen.classList.contains("unlocked")) {
            showToast("🔒 Először oldja fel a készüléket");
            return;
          }

          const content = document.getElementById(`${appName}-content`);
          const webview = document.getElementById(`${appName}-webview`);

          // Animáció előkészítése
          content.style.display = "flex";
          setTimeout(() => {
            content.classList.add("active");

            // Webview betöltése (ha nem settings)
            if (
              appName !== "settings" &&
              (!webview.src || webview.src === "about:blank")
            ) {
              webview.src = appUrls[appName];
            }
          }, 10);
        }

        // App bezárása
        function closeApp() {
          const activeApp = document.querySelector(".app-content.active");
          if (activeApp) {
            activeApp.classList.add("closing");
            activeApp.style.transform = "translateY(100%)";

            setTimeout(() => {
              activeApp.classList.remove("active", "closing");
              activeApp.style.display = "none";
              activeApp.style.transform = "";
            }, 500);
          }
        }

        // Swipe gesture kezelése
        let startY = null;
        let currentApp = null;
        let isSwiping = false;
        let startTime = 0;
        const swipeThreshold = 100; // Minimum distance to trigger close
        const velocityThreshold = 0.3; // Minimum velocity to trigger close
        const bottomAreaHeight = 50; // Only recognize swipe from bottom area

        document.addEventListener(
          "touchstart",
          function (e) {
            const activeApp = document.querySelector(".app-content.active");
            if (activeApp && e.touches.length === 1) {
              const touchY = e.touches[0].clientY;
              const screenHeight = window.innerHeight;

              // Only start swipe if touch is in bottom area
              if (touchY > screenHeight - bottomAreaHeight) {
                startY = touchY;
                currentApp = activeApp;
                isSwiping = true;
                startTime = Date.now();
                currentApp.classList.add("swiping");
                currentApp.style.transition = "none";
              }
            }
          },
          { passive: true }
        );

        document.addEventListener(
          "touchmove",
          function (e) {
            if (!isSwiping || !startY) return;

            const touchY = e.touches[0].clientY;
            const diff = touchY - startY;

            // Only allow swipe up (negative diff)
            if (diff < 0) {
              const translateY = Math.max(diff, -window.innerHeight);
              currentApp.style.transform = `translateY(${translateY}px)`;
            }
          },
          { passive: true }
        );

        document.addEventListener(
          "touchend",
          function (e) {
            if (!isSwiping || !startY || !currentApp) return;

            const touchY = e.changedTouches[0].clientY;
            const diff = touchY - startY;
            const timeElapsed = Date.now() - startTime;
            const velocity = Math.abs(diff) / timeElapsed;

            // Check if swipe should close the app
            if (diff < -swipeThreshold || velocity > velocityThreshold) {
              closeApp();
            } else {
              // Return to original position
              currentApp.style.transition =
                "transform 0.3s cubic-bezier(0.25, 1, 0.5, 1)";
              currentApp.style.transform = "translateY(0)";

              setTimeout(() => {
                currentApp.style.transition = "";
              }, 300);
            }

            // Reset
            currentApp.classList.remove("swiping");
            isSwiping = false;
            startY = null;
            currentApp = null;
          },
          { passive: true }
        );

        // URL mentése
        window.saveUrl = function (appName) {
          const input = document.getElementById(`${appName}-url-input`);
          const url = input.value.trim();

          if (url) {
            // URL validáció
            let validUrl = url;
            if (
              !validUrl.startsWith("http://") &&
              !validUrl.startsWith("https://")
            ) {
              validUrl = "https://" + validUrl;
            }

            // Mentés JavaScript változóba
            appUrls[appName] = validUrl;

            // Webview frissítése
            const webview = document.getElementById(`${appName}-webview`);
            if (webview) {
              webview.src = validUrl;
            }

            // Sikeres mentés visszajelzés
            showToast(`✅ ${appName} URL sikeresen mentve`);
          } else {
            showToast("⚠️ Kérjük adj meg egy érvényes URL-t!");
          }
        };

        // Háttérkép váltása
        window.changeWallpaper = function (wallpaperId) {
          const wallpapers = {
            gradient1: "linear-gradient(160deg, #f5f7fa 0%, #c3cfe2 100%)",
            gradient2: "linear-gradient(135deg, #6d28d9 0%, #8b5cf6 100%)",
            gradient3: "linear-gradient(135deg, #3b82f6 0%, #1dd4af 100%)",
            gradient4: "linear-gradient(135deg, #f97316 0%, #f59e0b 100%)",
            gradient5: "linear-gradient(135deg, #ec4899 0%, #f472b6 100%)",
            gradient6: "linear-gradient(135deg, #1db954 0%, #34d399 100%)",
          };

          // Convert gradient to data URL for better performance
          const gradientToDataURL = (gradient) => {
            return `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><linearGradient id="gradient" gradientTransform="rotate(160)"><stop offset="0%" stop-color="${gradient
              .match(/#[0-9a-f]{6}/gi)[0]
              .substring(1)}"/><stop offset="100%" stop-color="${gradient
              .match(/#[0-9a-f]{6}/gi)[1]
              .substring(
                1
              )}"/></linearGradient><rect width="100%" height="100%" fill="url(%23gradient)"/></svg>')`;
          };

          document.documentElement.style.setProperty(
            "--current-wallpaper",
            gradientToDataURL(wallpapers[wallpaperId])
          );

          // Aktív állapot frissítése
          document.querySelectorAll(".wallpaper-option").forEach((option) => {
            option.classList.remove("active");
          });
          document
            .querySelector(`.wallpaper-option[data-wallpaper="${wallpaperId}"]`)
            .classList.add("active");

          showToast("🎨 Háttérkép megváltoztatva");
        };

        // Értesítés megjelenítése
        function showToast(message) {
          const toast = document.getElementById("toast");
          toast.textContent = message;
          toast.classList.add("show");

          setTimeout(() => {
            toast.classList.remove("show");
          }, 3000);
        }

        // Webview scrollbar elrejtése
        const style = document.createElement("style");
        style.innerHTML = `
                .webview-container::-webkit-scrollbar {
                    display: none;
                }
                .webview {
                    overflow: hidden !important;
                }
            `;
        document.head.appendChild(style);
      });
    </script>
  </body>
</html>
